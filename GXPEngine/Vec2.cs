using System;
using GXPEngine;    // For Mathf

public struct Vec2
{
	public float x;
	public float y;

	public Vec2(float pX = 0, float pY = 0)
	{
		x = pX;
		y = pY;
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														ToString()
	//------------------------------------------------------------------------------------------------------------------------
	public override string ToString()
	{
		return String.Format("({0},{1})", x, y);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														SetXY()
	//------------------------------------------------------------------------------------------------------------------------
	public void SetXY(float pX, float pY)
	{
		x = pX;
		y = pY;
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Length()
	//------------------------------------------------------------------------------------------------------------------------
	public float Length()
	{
		return Mathf.Sqrt(x * x + y * y);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Normalize()
	//------------------------------------------------------------------------------------------------------------------------
	public void Normalize()
	{
		float len = Length();
		if (len > 0)
		{
			x /= len;
			y /= len;
		}
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Normalized()
	//------------------------------------------------------------------------------------------------------------------------
	public Vec2 Normalized()
	{
		Vec2 result = new Vec2(x, y);
		result.Normalize();
		return result;
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Adding Vectors
	//------------------------------------------------------------------------------------------------------------------------
	public static Vec2 operator +(Vec2 left, Vec2 right)
	{
		return new Vec2(left.x + right.x, left.y + right.y);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Subtracting Vectors
	//------------------------------------------------------------------------------------------------------------------------
	public static Vec2 operator -(Vec2 left, Vec2 right)
	{
		return new Vec2(left.x - right.x, left.y - right.y);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Multiplying vector with scalar
	//------------------------------------------------------------------------------------------------------------------------
	public static Vec2 operator *(Vec2 v, float scalar)
	{
		return new Vec2(v.x * scalar, v.y * scalar);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Multiplying vector with scalar
	//------------------------------------------------------------------------------------------------------------------------
	public static Vec2 operator *(float scalar, Vec2 v)
	{
		return new Vec2(v.x * scalar, v.y * scalar);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Dividing vectors
	//------------------------------------------------------------------------------------------------------------------------
	public static Vec2 operator /(Vec2 v, float scalar)
	{
		return new Vec2(v.x / scalar, v.y / scalar);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														DegToRad()
	//------------------------------------------------------------------------------------------------------------------------
	public static float DegToRad(float _tempDeg)
	{
		return _tempDeg * (Mathf.PI / 180);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														RadToDeg()
	//------------------------------------------------------------------------------------------------------------------------
	public static float RadToDeg(float _tempRad)
	{
		return _tempRad * (180 / Mathf.PI);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														GetUnitVectorDeg()
	//------------------------------------------------------------------------------------------------------------------------
	public static Vec2 GetUnitVectorDeg(float _tempDeg)
	{
		float _toRad = DegToRad(_tempDeg);
		return GetUnitVectorRad(_toRad);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														GetUnitVectorRad()
	//------------------------------------------------------------------------------------------------------------------------
	public static Vec2 GetUnitVectorRad(float _tempRad)
	{
		return new Vec2(Mathf.Cos(_tempRad), Mathf.Sin(_tempRad));
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														RandomUnitVector()
	//------------------------------------------------------------------------------------------------------------------------
	public static Vec2 RandomUnitVector()
	{
		Random _rnd = new Random();
		return GetUnitVectorDeg(_rnd.Next(366));
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														SetAngleDegrees()
	//------------------------------------------------------------------------------------------------------------------------
	public void SetAngleDegrees(float _tempDeg)
	{
		SetAngleRadians(DegToRad(_tempDeg));
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														SetAngleRadians()
	//------------------------------------------------------------------------------------------------------------------------
	public void SetAngleRadians(float _tempRad)
	{
		float _vectorLength = Length();
		x = _vectorLength * Mathf.Cos(_tempRad);
		y = _vectorLength * Mathf.Sin(_tempRad);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														GetAngleRadians()
	//------------------------------------------------------------------------------------------------------------------------
	public float GetAngleRadians()
	{
		return Mathf.Atan2(y, x);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														GetAngleDegrees()
	//------------------------------------------------------------------------------------------------------------------------
	public float GetAngleDegrees()
	{
		return RadToDeg(GetAngleRadians());
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														RotateDegrees()
	//------------------------------------------------------------------------------------------------------------------------
	public void RotateDegrees(float _tempDeg)
	{
		RotateRadians(DegToRad(_tempDeg));
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														RotateRadians()
	//------------------------------------------------------------------------------------------------------------------------
	public void RotateRadians(float _tempRad)
	{

		Vec2 tempVector = this;
		x = tempVector.x * Mathf.Cos(_tempRad) - tempVector.y * Mathf.Sin(_tempRad);
		y = tempVector.x * Mathf.Sin(_tempRad) + tempVector.y * Mathf.Cos(_tempRad);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														RotateAroundDegrees()
	//------------------------------------------------------------------------------------------------------------------------
	public void RotateAroundDegrees(Vec2 _point, float _tempDeg)
	{
		RotateAroundRadians(_point, DegToRad(_tempDeg));
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														RotateAroundRadians()
	//------------------------------------------------------------------------------------------------------------------------
	public void RotateAroundRadians(Vec2 _point, float _tempRad)
	{
		Vec2 tempVector = this;

		Vec2 subtractedVec = tempVector - _point;

		subtractedVec.RotateRadians(_tempRad);

		Vec2 addedVec = subtractedVec + _point;

		x = addedVec.x;
		y = addedVec.y;
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Dot()
	//------------------------------------------------------------------------------------------------------------------------
	public float Dot(Vec2 other)
	{
		return this.x * other.x + this.y * other.y;
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Normal()
	//------------------------------------------------------------------------------------------------------------------------
	public Vec2 Normal()
	{
		Vec2 perpVec = new Vec2(-y, x);
		perpVec.Normalize();
		return new Vec2(perpVec.x, perpVec.y);
	}

	//------------------------------------------------------------------------------------------------------------------------
	//														Reflect()
	//------------------------------------------------------------------------------------------------------------------------
	public void Reflect(Vec2 pNormal, float pBounciness = 1)
	{
		Vec2 velocity = new Vec2(x, y);

		velocity -= (1 + pBounciness) * (velocity.Dot(pNormal)) * pNormal;

		x = velocity.x;
		y = velocity.y;
	}
}